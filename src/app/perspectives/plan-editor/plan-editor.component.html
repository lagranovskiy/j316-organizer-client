<form materialize class="col s12" #planForm="ngForm">

  <div class="row valign-wrapper">
    <div class="col s1">
      <i class="large material-icons">border_clear</i>
    </div>

    <div class="col s7">
      <h3>{{plan.planName }}</h3>
    </div>

    <div class="col s4 right-align">
      <plan-navigation-toolbar [isSaveAllowed]="planForm.valid" [isPersistent]="isPersistent" (saveClicked)="savePlan()"
                               (backClicked)="navDashboard()" (removeClicked)="removePlan()"></plan-navigation-toolbar>
    </div>

  </div>

  <div class="card-panel">
    <div class="row">
      <div class="input-field col s12">
        <input placeholder="Planbezeichnung" name="planName" [ngModel]="plan.planName" (change)="onChanges($event)"
               id="planName"
               type="text" class="validate" required #planName="ngModel">
        <label for="planName">Planbezeichnung</label>
        <div [hidden]="planName.valid || planName.pristine"
             class="red-text">
          Planbezeichnung muss angegeben werden
        </div>
      </div>
    </div>


    <div class="row">
      <div class="input-field col s4">
        <input placeholder="Plan Beginn" name="planStart" type="text" [ngModel]="plan.planStart"
               (change)="onChanges($event)"
               id="planStart"
               materialize="pickadate"
               [materializeParams]="[{selectMonths: true, selectYears: 15, format:'dd.mm.yyyy'}]" required/>
        <label for="planStart">Planbeginn</label>
      </div>

      <div class="input-field col s4">
        <input placeholder="Plan Ende" name="planEnd" type="text" [ngModel]="plan.planEnd" id="planEnd"
               (change)="onChanges($event)"
               materialize="pickadate"
               [materializeParams]="[{ selectMonths: true,format:'dd.mm.yyyy'}]" required/>
        <label for="planStart">Planende</label>
      </div>


      <div class="input-field col s4">
        <input placeholder="Wiederholung (Tage)"
               name="eventRecurringDays"
               type="text" [(ngModel)]="plan.eventRecurringDays"
               id="eventRecurringDays"
               (change)="onChanges($event)"
               materialize=""/>
        <label for="eventRecurringDays">Wiederholung (Tage)</label>
      </div>
    </div>
  </div>

  <div class="row" style="position: relative;">
    <div class="col s4">
      <h4>Plangruppen</h4>
    </div>
    <div class="col s8 right-align">
      <a (click)="addDienstPlanGruppe()" class="btn-floating btn-small waves-effect waves-light red"><i
        class="material-icons">add</i></a>
    </div>


  </div>
  <div class="row">
    <div class="col s12">
      <div *ngFor="let dienstPlanGruppe of plan.groupList">

        <gruppe-view [model]="dienstPlanGruppe" [personList]="personList"
                     (removeClicked)="removeDienstPlanGruppe($event)"></gruppe-view>
        <!--  <view-card [model]="dienstPlanGruppe" (openClicked)="openDienstPlanGruppe($event)"></view-card>-->
      </div>
    </div>

  </div>


  <div class="row">
    <div class="col s4">
      <h4>Besetzung</h4>
    </div>
  </div>

  <div class="row">
    <div class="col s12">
      <app-plan-table [plan]="plan" [personList]="personList"></app-plan-table>
    </div>
  </div>


</form>
